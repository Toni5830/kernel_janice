***************
*** 318,323 ****
  
  	unsigned int		sdio_irqs;
  	struct task_struct	*sdio_irq_thread;
  	atomic_t		sdio_irq_thread_abort;
  
  	mmc_pm_flag_t		pm_flags;	/* requested pm features */
--- 318,324 ----
  
  	unsigned int		sdio_irqs;
  	struct task_struct	*sdio_irq_thread;
+ 	bool			sdio_irq_pending;
  	atomic_t		sdio_irq_thread_abort;
  
  	mmc_pm_flag_t		pm_flags;	/* requested pm features */
***************
*** 363,368 ****
  static inline void mmc_signal_sdio_irq(struct mmc_host *host)
  {
  	host->ops->enable_sdio_irq(host, 0);
  	wake_up_process(host->sdio_irq_thread);
  }
  
--- 364,370 ----
  static inline void mmc_signal_sdio_irq(struct mmc_host *host)
  {
  	host->ops->enable_sdio_irq(host, 0);
+ 	host->sdio_irq_pending = true;
  	wake_up_process(host->sdio_irq_thread);
  }
  
